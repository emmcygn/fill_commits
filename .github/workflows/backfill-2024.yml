# .github/workflows/backfill-2024.yml

on:
  workflow_dispatch:
  schedule:
    - cron: '0 3 * * *'  # Run daily at 3 AM UTC

jobs:
  backfill-2024:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
    - name: Backfill 2024 commits
      uses: bcanseco/github-contribution-graph-action@v2
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        GIT_EMAIL: emmanuelcuyugan@gmail.com
        MAX_DAYS: 366  # 2024 is a leap year
        MIN_COMMITS_PER_DAY: 0
        MAX_COMMITS_PER_DAY: 1
        INCLUDE_WEEKENDS: true
        INCLUDE_WEEKDAYS: true
        GIT_COMMIT_MESSAGE: "chore: 2024 contribution"
        # Use ORIGIN_TIMESTAMP to target 2024 specifically (July 1, 2024)
        ORIGIN_TIMESTAMP: "1719792000"  # Unix timestamp for 2024-07-01 00:00:00 UTC
    
  verify-2024-commits:
    needs: [backfill-2024]
    runs-on: ubuntu-latest
    steps:
    - name: Verify 2024 commits
      run: |
        echo "Checking 2024 commits..."
        git log --oneline --since="2024-01-01" --until="2024-12-31" | wc -l
        echo "2024 backfill completed successfully!"
